# 2. JWT(JSON Web Token)이란?

## 1. JWT란?

- JWT란, JSON Web Token의 줄임말
- 로그인 상태를 유지하거나 사용자를 인증하기 위해 발급받는 디지털 신분증 같은 문자열.
- 이걸 가지고 다니면서 서버에 "나 인증된 사용자야!" 하고 증명하는 용도로 쓰입니다.
  어 있고, 이 데이터를 암호화해서 누구나 내용을 쉽게 조작하지 못하게 만든 토큰.

## 2. JWT의 구조

- Header (헤더) → 어떤 방식으로 암호화했는지 정보

- Payload (내용) → 실제 담고 싶은 데이터 (예: 사용자 아이디, 권한 등)

- Signature (서명) → 위 데이터가 중간에 바뀌지 않았는지 확인하는 도장

## 3. JWT의 형식

점(.)으로 구분된 3구조로 되어 있습니다.

```bash
aaa.bbb.ccc
```

### Header (헤더)

```json
{
  "alg": "HS256", // 서명 알고리즘
  "typ": "JWT" // 토큰 타입
}
```

### Payload (내용)

```json
{
  "userId": "1234",
  "name": "Hong Gildon",
  "role": "user"
}
```

→ 여기에는 로그인한 사용자 정보, 권한, 토큰 만료 시간 같은 걸 넣을 수 있습니다.

### Signature (서명)

```js
HMACSHA256(base64UrlEncode(header) + "." + base64UrlEncode(payload), secretKey);
```

→ 서버만 알고 있는 secretKey로 만든 도장(서명)과 같음.
→ 중간에 누군가 payload를 바꾸면 signature가 맞지 않아서 인증 실패합니다.

### 예시

```bash
eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9
.
eyJ1c2VySWQiOiIxMjM0IiwibmFtZSI6IkhvbmcgR2lsZG9uIiwicm9sZSI6InVzZXIifQ
.
TJVA95OrM7E2cBab30RMHrHDcEfxjoYZgeFONFh7HgQ
```

- 암호화가 아니기 때문에 누구나 읽을 수 있습니다.

## 4. 어떻게 쓰이나?

- 사용자가 로그인하면 서버가 JWT를 발급합니다.

- 이후 사용자가 요청할 때마다 이 토큰을 같이 보내면, 서버는 다시 비밀번호를 물어보지 않고도 "이 사람 맞구나" 하고 확인할 수 있습니다.

## 5. JWT 장점과 단점

### 장점

- 가볍다 → 문자열 한 줄이라서 웹·모바일 어디서든 쉽게 전달 가능

- 서버에 별도 세션 저장 필요 없음 → 서버는 단지 토큰을 검증하기만 하면 됨

### 단점

- 토큰 안의 내용은 누구나 볼 수 있다 (암호화가 아닌 서명만 함) → 민감한 정보는 넣으면 안 됨

- 한 번 발급된 토큰은 만료되기 전까지 계속 유효 → 잘못 유출되면 위험
