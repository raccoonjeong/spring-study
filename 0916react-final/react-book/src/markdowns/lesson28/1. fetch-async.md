# 1. fetch 동작 이해하기

## 동기 작업이란? (Synchronous)

- 작동 방식: 작업이 순서대로 하나씩 실행됨.

- 특징: 앞의 작업이 끝나야 다음 작업을 실행할 수 있음. 만약 앞 작업이 안 끝나면 다음 코드 진행을 못함.(계속 기다림)

```js
console.log("1");
console.log("2"); // 1이 끝난 후 실행
console.log("3");

// 1 → 2 → 3 순으로 출력
```

## 비동기 작업이란? (Asynchronous)

- 작동 방식: 시간이 오래 걸리는 작업(네트워크 요청, 파일 읽기 등)을 기다리지 않고, 먼저 다음 작업을 진행함. 나중에 결과가 준비되면 콜백/Promise/async-await으로 처리.

- 특징: 동시에 여러 일을 처리하는 것처럼 보임.

```js
console.log("1");
setTimeout(() => console.log("2"), 1000); // 1초 후 실행 예약
console.log("3");

// 1 → 3 → (1초 후) 2 순으로 출력
```

- 동기: “줄 서서 차례대로 처리”

- 비동기: “기다리지 않고 예약해두고, 다른 일 먼저 진행”

## fetch와 Promise

자바스크립트에서 fetch는 **비동기 함수**입니다.

즉, 실행 즉시 서버 응답을 돌려주는 게 아니라, **Promise** 객체를 반환합니다.

```js
const promise = fetch("http://localhost:4000/posts");
console.log(promise);
// 출력: Promise { <pending> }  (아직 결과가 안 온 상태)
```

## 왜 Promise가 필요할까?

비동기 작업(예: 서버 요청, 파일 읽기, 타이머 등)은 결과가 바로 나오지 않습니다.

그래서 “결과가 준비되면 알려줄게”라는 약속(Promise) 객체를 반환합니다.

### Promise의 상태

Promise는 시간의 흐름에 따라 3가지 상태를 가집니다.

- **Pending**(대기): 결과가 아직 없음

- **Fulfilled**(이행): 성공 → .then() 실행

- **Rejected**(거부): 실패 → .catch() 실행

### fetch에서 Promise 사용

```js
fetch("http://localhost:4000/posts")
  .then((res) => res.json()) // 응답 성공 시 실행
  .then((data) => console.log("데이터:", data))
  .catch((err) => console.error("에러:", err));
```

처음에는 Promise가 **pending** (대기) 상태로 기다립니다.

그러다가 서버 응답이 오면 **fulfilled**(이행) 상태가 되고 .then() 실행합니다.

만약 에러가 나면 **rejected** (거부) 상태로 .catch() 실행합니다.

### 정리하자면...

- **Promise** = "미래의 결과를 약속하는 객체"

- 세 가지 상태: 처음엔 **pending** (대기) → 실행 후 **fulfilled** (이행) 혹은 **rejected** (거절)

## async/await와 Promise

**async/await**은 사실 Promise를 더 직관적으로 쓰는 문법입니다.

```js
async function loadPosts() {
  try {
    const res = await fetch("http://localhost:4000/posts"); // Promise 기다림
    const data = await res.json(); // 또 다른 Promise
    console.log("데이터:", data);
  } catch (err) {
    console.error("에러:", err);
  }
}
```

**await**는 Promise가 끝날 때까지 기다렸다가 결과를 변수에 넣습니다.

실질적으로 비동기로 실행되지만 코드 흐름은 순차적으로 읽혀서 가독성이 좋아집니다.

간단한 코드는 .then() 방식을 쓰지만, 복잡한 코드나 실무에서는 await 방식을 좀더 많이 사용합니다.

- async/await는 한 세트! (await는 async 함수 안에서만 동작 가능함.)

## 핵심 요약

- fetch는 Promise를 반환하는 비동기 함수다.

- Promise는 “결과를 나중에 알려주는 약속” → then() 혹은 async/await으로 처리한다.

- 실무에서는 async/await 방식을 더 많이 씀.
