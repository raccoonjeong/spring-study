# 1. RESTful API 이해하기

## 1. REST란?

- **RE**presentational **S**tate **T**ransfer 의 줄임말

- 2000년에 로이 필딩(Roy Fielding)이 논문에서 제시한 웹 아키텍처 스타일

- 간단히 말하면: “웹의 자원을 규칙적으로 다루는 방식”

## 2. API란?

- **A**pplication **P**rogramming **I**nterface

- 프로그램(애플리케이션)끼리 서로 통신하고 기능을 쓸 수 있게 해주는 "창구"

- 우리가 프론트엔드(React)에서 백엔드(Express, Spring, FastAPI 등)로 데이터를 주고받을 때 사용

## 3. RESTful API란?

- REST 원칙을 잘 지킨 API를 의미

- 즉, 웹 자원을 URL로 표현하고, HTTP 메서드(GET/POST/PUT/DELETE 등)를 활용해 동작을 구분하는 API

## 4. RESTful API의 기본 규칙

### 리소스(Resource)는 URL로 표현

- URL은 동사(X) → 명사(O)

- 예: /users (사용자 목록), /posts (게시글 목록)

### 동작은 HTTP 메서드로 표현

- GET → 데이터 조회

- POST → 데이터 생성

- PUT → 데이터 전체 수정

- PATCH → 데이터 부분 수정

- DELETE → 데이터 삭제

### 무상태(Stateless)

- 요청 하나하나는 독립적이어야 함 (서버가 이전 요청을 기억하지 않음)

### 일관성 있는 규칙

- URL, 메서드, 응답 포맷(JSON)을 일관성 있게 지켜야 클라이언트가 쉽게 이해 가능

## 5. RESTful API 예시

### (예시) 글 관리 API 설계

- **GET** /posts → 모든 게시글 조회

- **GET** /posts/:id → 특정 게시글 조회 (예: /posts/1)

- **POST** /posts → 새 게시글 생성

- **PUT** /posts/:id → 특정 게시글 전체 수정 (덮어쓰기)

- **PATCH** /posts/:id → 특정 게시글 일부 수정

- **DELETE** /posts/:id → 특정 게시글 삭제

### Express 코드 예시

```js
import express from "express";

const app = express();
app.use(express.json());

let posts = [{ id: 1, title: "첫 글", content: "내용" }];
let nextId = 2;

// 목록 조회
app.get("/posts", (req, res) => {
  res.json(posts);
});

// 단일 조회
app.get("/posts/:id", (req, res) => {
  const post = posts.find((p) => p.id === parseInt(req.params.id));
  post ? res.json(post) : res.status(404).send("Not found");
});

// 생성
app.post("/posts", (req, res) => {
  const newPost = { id: nextId++, ...req.body };
  posts.push(newPost);
  res.status(201).json(newPost);
});

// 전체 수정 (PUT)
app.put("/posts/:id", (req, res) => {
  const idx = posts.findIndex((p) => p.id === parseInt(req.params.id));
  if (idx === -1) return res.status(404).send("Not found");
  posts[idx] = { id: posts[idx].id, ...req.body };
  res.json(posts[idx]);
});

// 부분 수정 (PATCH)
app.patch("/posts/:id", (req, res) => {
  const post = posts.find((p) => p.id === parseInt(req.params.id));
  if (!post) return res.status(404).send("Not found");
  Object.assign(post, req.body);
  res.json(post);
});

// 삭제
app.delete("/posts/:id", (req, res) => {
  posts = posts.filter((p) => p.id !== parseInt(req.params.id));
  res.send("Deleted");
});

app.listen(4000, () => console.log("Server running on 4000"));
```

## 6. RESTful API 장점

- URL만 봐도 기능을 유추할 수 있어 직관적임

- 클라이언트/서버 역할 분리가 명확

- HTTP 표준을 따르므로 다양한 언어·플랫폼에서 쉽게 사용 가능

## 7. REST vs RESTful 차이

### REST (원칙)

- 개념(이론) 자체를 말합니다.

- “자원을 주소(URL)로 표현하고, 동작은 HTTP 메서드로 구분한다” 같은 설계 원칙을 뜻함.

### RESTful (원칙대로 만든 결과물)

- REST 원칙을 잘 지켜서 구현한 API를 말합니다.

- 즉, REST스럽게 만들었다는 뜻.

- 단순히 REST를 따라한다고 다 RESTful은 아님 → 규칙을 어기면 “RESTful하지 않다”고 합니다.

## 8. RESTful 예시 비교하기

### RESTful한 API 예시

- **GET** /users → 사용자 목록 조회
- **GET** /users/10 → ID=10 사용자 조회
- **POST** /users → 사용자 생성
- **DELETE** /users/10 → ID=10 사용자 삭제

### RESTful하지 않은 API 예시

- **GET** /getAllUsers → 사용자 목록 조회
- **GET** /getUser?id=10 → ID=10 사용자 조회
- **POST** /createUser → 사용자 생성
- **GET** /deleteUser?id=10 → ID=10 사용자 삭제
