# 4. ScrollToTop 스크롤 항상 위로

## 1. ScrollToTop이 필요한 이유

React에서 페이지 라우팅(React Router)으로 이동할 때, 브라우저는 이전 스크롤 위치를 그대로 유지합니다.

예를 들어:

- /posts 페이지에서 아래쪽까지 스크롤

- 글 클릭 → /posts/1 상세 페이지로 이동

- 화면이 맨 위가 아니라 스크롤이 아래쪽에 멈춰 있음 → UX 불편

이 문제를 해결하기 위해 라우트가 바뀔 때마다 스크롤을 맨 위(0,0) 로 올려주는 컴포넌트를 따로 만듭니다. (= ScrollToTop)

## 2. ScrollToTop 코드 예제

```jsx
import { useLayoutEffect } from "react";
import { useLocation } from "react-router-dom";

function ScrollToTop() {
  const { pathname } = useLocation(); // 현재 URL 경로 감지

  useLayoutEffect(() => {
    window.scrollTo(0, 0); // 페이지 이동 시 항상 맨 위로
  }, [pathname]);

  return null; // 화면에 아무것도 렌더링하지 않음
}

export default ScrollToTop;
```

## 3. 설치 위치

App.js 안에서 <BrowserRouter> 바로 아래에 설치하는 게 일반적입니다.

```jsx
import { BrowserRouter, Routes, Route } from "react-router-dom";
import ScrollToTop from "./ScrollToTop";
import PostList from "./PostList";
import PostDetail from "./PostDetail";

function App() {
  return (
    <BrowserRouter>
      <ScrollToTop /> {/* 라우트 바뀔 때마다 스크롤 초기화 */}
      <Routes>
        <Route path="/posts" element={<PostList />} />
        <Route path="/posts/:id" element={<PostDetail />} />
      </Routes>
    </BrowserRouter>
  );
}

export default App;
```

## 4. useLayoutEffect 훅을 쓰는 이유

### useEffect vs useLayoutEffect 차이

- useEffect: 브라우저가 화면을 그린 뒤 실행됨 → 사용자가 스크롤이 깜빡 보일 수 있음.

- useLayoutEffect: 브라우저가 화면을 그리기 직전 실행됨 → 사용자는 항상 스크롤이 0,0 에 있는 상태만 보게 됨.

따라서 스크롤 위치 초기화처럼 **화면 그리기 전**에 실행돼야 하는 경우에는 **useLayoutEffect**가 더 적합합니다.

### 요약

- 필요성: 라우트 이동 시 스크롤이 아래쪽에 남는 문제 해결.

- 코드: useLocation으로 pathname을 감지 → window.scrollTo(0,0) 실행.

- 설치 위치: <BrowserRouter> 안, <Routes> 위.

- useLayoutEffect 이유: 화면 깜빡임 없이 렌더 전에 스크롤을 초기화하기 위해.
